import{a as V,b as q}from"./chunk-RWZTZ3W7.js";import{a as I}from"./chunk-RH5UTBKV.js";import{a as N}from"./chunk-VH7ZMVQR.js";import"./chunk-VETFLQVH.js";import{c as P,e as d,g as D,h as R,i as T,j as u,l as j,n as O,o as A,x as G}from"./chunk-XW6HRBBI.js";import{a as k}from"./chunk-DUBUWPD2.js";import"./chunk-PBA57O2B.js";import"./chunk-NPMQALXN.js";import"./chunk-DNPQSKTC.js";import{C as M,D as L,c as y,j as E,k as C}from"./chunk-TNPE2B44.js";import{$ as g,$b as _,Aa as v,Ab as c,Ib as x,Jb as b,Rb as i,Sb as w,Va as s,Wa as l,Zb as F,ea as f,lb as S,pb as m,ub as h,yb as t,zb as r}from"./chunk-MFMNMFCO.js";import"./chunk-DM275RSA.js";var U=o=>({"is-invalid":o});function B(o,J){if(o&1&&(t(0,"p",14)(1,"small",18),i(2),r()()),o&2){let e=b();s(2),w(e.errorMessage)}}var ae=(()=>{class o{constructor(e,a,n,p){this._LoginService=e,this._PLATFORM_ID=a,this._Router=n,this._ToastrService=p,this.errorMessage="",this.ngxSpinnerService=g(I),this.userForm=new T({email:new u("",[d.required,d.email]),password:new u("",[d.required])})}loginUser(){this.ngxSpinnerService.show(),this._LoginService.loginUser(this.userForm.value).subscribe({next:e=>{this.ngxSpinnerService.hide(),C(this._PLATFORM_ID)&&(console.log(e,"from Error Outer"),e.error?e.error=="Your Account Not Virfied yet"?(localStorage.setItem("email",this.userForm.get("email")?.value),this._Router.navigate(["/login/verify"])):(console.log(e,"from Error Message"),this.userForm.setErrors({invalidLogin:!0}),console.log(this.userForm.valid),console.log(e.error),this.errorMessage=e.error):(console.log(e,"from Error Success"),this.errorMessage="",localStorage.setItem("token",e.access_token),localStorage.setItem("userName",e.user.name),localStorage.setItem("userDetails",JSON.stringify(e.user)),this._ToastrService.success("Login Successfully"),localStorage.setItem("userId",e.user.id.toString()),this._Router.navigate(["/"])))},error:e=>{this.ngxSpinnerService.hide()}})}ngOnDestroy(){this.userForm.reset()}static{this.\u0275fac=function(a){return new(a||o)(l(N),l(v),l(M),l(k))}}static{this.\u0275cmp=f({type:o,selectors:[["app-login-form"]],standalone:!0,features:[F],decls:39,vars:8,consts:[[1,"p-3",3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"border-4","border-bottom"],[1,"row","g-3"],[1,"col-12"],[1,"d-flex","justify-content-between"],["for","userEmail",1,"form-label","fw-semibold","text-dark","text-opacity-75","mb-1"],[1,"text-danger"],[1,"text-danger","fst-italic","d-none","fw-bold"],["type","email","placeholder","name@example.com","name","userEmail","id","userEmail","autocomplete","email","formControlName","email",1,"form-control",3,"ngClass"],["for","userPassword",1,"form-label","fw-semibold","text-dark","text-opacity-75","mb-1"],["formControlName","password",1,"form-control","p-0","text-lowercase",3,"feedback","placeholder","toggleMask"],[1,"text-center"],[1,"btn","btn-secondary","px-5","py-2"],[1,"py-3","text-center"],["routerLink","/login/reset",1,"btn","text-primary"],["routerLink","/signup",1,"btn"],[1,"text-primary"],[1,"text-danger","fw-bold","fst-italic"]],template:function(a,n){a&1&&(t(0,"form",0),x("ngSubmit",function(){return n.loginUser()}),t(1,"h3",1)(2,"span",2),i(3,"Login"),r()(),t(4,"div",3)(5,"div",4)(6,"div")(7,"div",5)(8,"label",6),i(9,"Email:"),t(10,"span",7),i(11,"*"),r()(),t(12,"small",8),i(13,"required*"),r(),t(14,"small",8),i(15,"not valid email*"),r()(),c(16,"input",9),r()(),t(17,"div",4)(18,"div")(19,"div",5)(20,"label",10),i(21,"Password:"),t(22,"span",7),i(23,"*"),r()()(),c(24,"p-password",11),r()(),t(25,"div",4)(26,"div",12)(27,"button",13),i(28,"LogIn"),r(),S(29,B,3,1,"p",14),r()()()(),t(30,"div")(31,"p")(32,"button",15),i(33," forget password? "),r()(),t(34,"p",12)(35,"button",16),i(36," don't have an account? "),t(37,"span",17),i(38,"sign up"),r()()()()),a&2&&(m("formGroup",n.userForm),s(16),m("ngClass",_(6,U,n.userForm.invalid&&n.errorMessage.length>0)),s(8),m("feedback",!1)("placeholder","Password")("toggleMask",!0),s(5),h(29,n.userForm.invalid&&n.errorMessage.length>0?29:-1))},dependencies:[G,j,P,D,R,O,A,E,y,L,q,V],styles:["input[_ngcontent-%COMP%],   .p-password{min-width:100%!important;height:60px!important}"]})}}return o})();export{ae as LoginFormComponent};
