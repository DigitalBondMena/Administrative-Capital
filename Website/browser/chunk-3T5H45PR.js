import{a as G}from"./chunk-YZIUJSTD.js";import{c as k,e as _,g as M,h as I,i as N,j as g,l as x,m as L,n as R,o as D,s as P,t as O,w as j,x as q}from"./chunk-XW6HRBBI.js";import{a as T}from"./chunk-DUBUWPD2.js";import"./chunk-CEWKWK6U.js";import"./chunk-DNPQSKTC.js";import{C as F,D as w,c as E,j as A,k as f}from"./chunk-TNPE2B44.js";import{$b as h,Aa as S,Ab as C,Ib as p,Rb as l,Va as s,Wa as m,Zb as b,ea as y,lb as V,pb as c,ub as u,yb as i,zb as o}from"./chunk-MFMNMFCO.js";import"./chunk-DM275RSA.js";var B=n=>({"is-invalid":n});function K(n,v){n&1&&(i(0,"p",10)(1,"small"),l(2,"code is required*"),o()())}function U(n,v){n&1&&(i(0,"p",10)(1,"small"),l(2,"please enter a valid Code*"),o()())}function W(n,v){n&1&&(i(0,"p",10)(1,"small"),l(2,"Wrong Code*"),o()())}var re=(()=>{class n{constructor(t,r,e,a){this._PrivacySettingsService=t,this._Router=r,this._ToastrService=e,this._PLATFORM_ID=a,this.startValidation=!1,this.isValidEmail=!1,this.userForm=new N({email:new g(""),email_code:new g("",[_.required,_.min(6)])})}ngOnInit(){f(this._PLATFORM_ID)&&this.userForm.get("email")?.setValue(localStorage.getItem("email"))}onSendOtpClick(){this.startValidation=!0,this.userForm.valid&&this._PrivacySettingsService.verifyUserCode(this.userForm.value).subscribe({next:t=>{console.log(t),t.success?(f(this._PLATFORM_ID)&&this._Router.navigate(["/login"]),this._ToastrService.success("Account Verified")):this.isValidEmail=!0},error:t=>{console.log(t)}})}onlyAllowNumbers(t){let r=["Backspace","ArrowLeft","ArrowRight","Tab"];!/^\d$/.test(t.key)&&!r.includes(t.key)&&t.preventDefault()}enforceMaxLength(t){let r=t.target;r.value.length>6&&(r.value=r.value.slice(0,6))}get email(){return this.userForm.get("email_code")}static{this.\u0275fac=function(r){return new(r||n)(m(G),m(F),m(T),m(S))}}static{this.\u0275cmp=y({type:n,selectors:[["app-verify-account"]],standalone:!0,features:[b],decls:28,vars:7,consts:[[1,"p-3",3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"border-4","border-bottom"],[1,"row","g-3"],[1,"col-12"],[1,"d-flex","justify-content-between"],["for","userEmail",1,"form-label","fw-semibold","text-dark","text-opacity-75","mb-1"],[1,"text-danger"],[1,"text-danger","fst-italic","d-none","fw-bold"],["type","number","name","userEmail","id","userEmail","autocomplete","email","maxlength","6","pattern","\\d{6}","formControlName","email_code",1,"form-control",3,"focus","keypress","input","ngClass"],[1,"text-danger","fst-italic","fw-bold"],[1,"text-center"],[1,"btn","btn-secondary","px-5","py-2"],["routerLink","/login",1,"btn","text-main"],[1,"pi-arrow-circle-left","pi","me-1"]],template:function(r,e){r&1&&(i(0,"form",0),p("ngSubmit",function(){return e.onSendOtpClick()}),i(1,"h3",1)(2,"span",2),l(3,"Verify Your Email Address"),o()(),i(4,"div",3)(5,"div",4)(6,"div")(7,"div",5)(8,"label",6),l(9,"please enter Verification code sent to your email:"),i(10,"span",7),l(11,"*"),o()(),i(12,"small",8),l(13,"required*"),o(),i(14,"small",8),l(15,"Not Valid Code*"),o()(),i(16,"input",9),p("focus",function(){return e.isValidEmail=!1,e.startValidation=!1})("keypress",function(d){return e.onlyAllowNumbers(d)})("input",function(d){return e.enforceMaxLength(d)}),o()()(),i(17,"div",4)(18,"div"),V(19,K,3,0,"p",10)(20,U,3,0,"p",10)(21,W,3,0,"p",10),o(),i(22,"div",11)(23,"button",12),l(24,"send code"),o()()()()(),i(25,"button",13),C(26,"i",14),l(27,` back to login
`),o()),r&2&&(c("formGroup",e.userForm),s(16),c("ngClass",h(5,B,((e.email==null?null:e.email.getError("required"))||(e.email==null?null:e.email.getError("min")))&&e.startValidation||e.isValidEmail)),s(3),u(19,e.email!=null&&e.email.getError("required")&&e.startValidation?19:-1),s(),u(20,e.email!=null&&e.email.getError("min")&&e.startValidation?20:-1),s(),u(21,e.isValidEmail?21:-1))},dependencies:[q,x,k,L,M,I,P,O,R,D,w,j,A,E]})}}return n})();export{re as VerifyAccountComponent};
