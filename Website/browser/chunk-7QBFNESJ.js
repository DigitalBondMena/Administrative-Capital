import{a as X}from"./chunk-OCF5X673.js";import"./chunk-GELGV6ZH.js";import"./chunk-RH5UTBKV.js";import{h as J,i as K}from"./chunk-VVREEA4Z.js";import"./chunk-VETFLQVH.js";import{c as G,g as $,k as z,w as q}from"./chunk-XW6HRBBI.js";import{a as Q}from"./chunk-5PIXQBFG.js";import"./chunk-ICJAHFYR.js";import{a as W}from"./chunk-DUBUWPD2.js";import"./chunk-PBA57O2B.js";import"./chunk-NPMQALXN.js";import"./chunk-DNPQSKTC.js";import{C as N,c as j,i as V,j as A,k as D}from"./chunk-TNPE2B44.js";import{Aa as x,Ab as M,Eb as C,Ib as y,Jb as f,Rb as p,Sb as k,Tb as O,Va as a,Vb as T,Wa as l,Wb as F,Xb as U,Zb as B,_b as E,ac as L,ea as w,fc as h,ha as H,hc as v,ic as R,lb as m,na as u,oa as P,pb as _,ub as g,vb as S,wb as I,xb as b,yb as n,zb as s}from"./chunk-MFMNMFCO.js";import"./chunk-DM275RSA.js";var Y=(()=>{class o{transform(t,e){return t.filter(i=>i.title.toLocaleLowerCase().includes(e.toLocaleLowerCase()))}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275pipe=H({name:"searchProtocolsHistory",type:o,pure:!0,standalone:!0})}}return o})();var tt=()=>[8,16,32],ot=(o,c)=>({"border-bottom":o,"border-end":c});function et(o,c){o&1&&(n(0,"div",7)(1,"div",12)(2,"p",13),p(3,"No Protocols Found"),s()()())}function it(o,c){}function rt(o,c){if(o&1){let t=C();m(0,it,0,0),n(1,"div",14),y("click",function(){let i=u(t).$implicit,r=f(2);return P(r.onClickGetSpecificHistory(i.protocol_id))}),M(2,"img",15),n(3,"p",16),p(4),s(),n(5,"p",17),p(6),s()()}if(o&2){let t=c.$implicit,e=c.$index;g(0,t.title!=="Upper Acute Abdominal Pain"?0:-1),a(),_("ngClass",L(5,ot,e<4,e!==3&&e!==7)),a(),_("alt",t.title),a(2),k(t.title),a(2),O(" ",t.sub_category_name," ")}}function nt(o,c){if(o&1){let t=C();m(0,et,4,0,"div",7),h(1,"searchProtocolsHistory"),n(2,"div",8),I(3,rt,7,8,"div",9,S),h(5,"searchProtocolsHistory"),h(6,"slice"),s(),n(7,"div",10)(8,"p-paginator",11),y("onPageChange",function(i){u(t);let r=f();return P(r.onPageChange(i))}),s()()}if(o&2){let t=f();g(0,v(1,5,t.IProtocolHisory.Historys,t.inputSearch).length==0?0:-1),a(3),b(R(6,11,v(5,8,t.IProtocolHisory.Historys,t.inputSearch),t.first,t.next)),a(5),_("first",t.first)("rows",t.rows)("totalRecords",t.IProtocolHisory.Historys.length)("rowsPerPageOptions",E(15,tt))}}function st(o,c){o&1&&(n(0,"div",7)(1,"div",12)(2,"p",13),p(3,"No Protocols Found"),s()()())}var wt=(()=>{class o{constructor(t,e,i,r,d){this._HistoryProtocolsService=t,this._PLATFORM_ID=e,this._BookmarkService=i,this._ToastrService=r,this._Router=d,this.inputSearch="",this.first=0,this.rows=10,this.next=10}ngOnInit(){this.getPatientHistory()}getUserId(){if(D(this._PLATFORM_ID))return localStorage.getItem("userId")||""}getPatientHistory(){this._HistoryProtocolsService.getProtocolsHistory(this.getUserId()).subscribe({next:t=>{this.IProtocolHisory=t,this.IProtocolHisory.Historys.reverse(),console.log(t)},error:t=>{console.log(t)}})}removeBookmark(t,e){e.stopPropagation();let i={user_id:+this.getUserId(),bookmark_id:t};this._BookmarkService.deleteBookmark(i).subscribe({next:r=>{console.log(r),this._ToastrService.success("Bookmark removed")},error:r=>{console.log(r)}})}onClickGetSpecificHistory(t){console.log(t),this._Router.navigate(["/protocols/protocol-history",t])}onPageChange(t){this.first=t.first,this.rows=t.rows,t.first+t.rows<this.IProtocolHisory.Historys.length?(this.first=t.first,this.rows=t.rows,this.next=this.first+t.rows):this.next=this.IProtocolHisory.Historys.length}static{this.\u0275fac=function(e){return new(e||o)(l(X),l(x),l(Q),l(W),l(N))}}static{this.\u0275cmp=w({type:o,selectors:[["app-user-history"]],standalone:!0,features:[B],decls:10,vars:2,consts:[[1,"container-fluid"],[1,"py-5"],[1,"row","g-0"],[1,"col-12","shadow","w-100","mb-4","bg-secondary","p-5"],[1,"form-floating","mb-3"],["type","search","id","floatingInput","placeholder","search protocols...",1,"form-control",3,"ngModelChange","ngModel"],["for","floatingInput"],[1,"card","border-0","bg-light","shadow-sm","position-relative","card__animation"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-4","min-h-40vh"],[1,"text-center","bg-light","p-5","Protocol__Card","position-relative","card__animation",3,"ngClass"],[1,"flex","justify-content-center"],[3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],[1,"card-title","p-3","pb-0","fs-4"],[1,"fw-semibold"],[1,"text-center","bg-light","p-5","Protocol__Card","position-relative","card__animation",3,"click","ngClass"],["src","./assets/app_logo.webp",1,"w-85","mx-auto","mb-3",3,"alt"],[1,"fs-6","text-secondary","fw-bold"],[1,"fs-6","text-secondary"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),U("ngModelChange",function(d){return F(i.inputSearch,d)||(i.inputSearch=d),d}),s(),n(6,"label",6),p(7,"Search Protocols"),s()()(),m(8,nt,9,16)(9,st,4,0),s()()()),e&2&&(a(5),T("ngModel",i.inputSearch),a(3),g(8,i.IProtocolHisory&&i.IProtocolHisory.Historys?8:9))},dependencies:[A,j,V,q,G,$,z,Y,K,J],styles:[".Protocol__Card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::selection{background-color:transparent}.Protocol__Card[_ngcontent-%COMP%]{overflow-x:auto;cursor:pointer;transition:all .3s}.Protocol__Card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:all .3s}.Protocol__Card[_ngcontent-%COMP%]:hover{box-shadow:0 0 3px #14457b inset;z-index:1;background-color:#fff!important}.Protocol__Card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.Protocol__Card[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]{text-decoration:underline}"]})}}return o})();export{wt as UserHistoryComponent};
