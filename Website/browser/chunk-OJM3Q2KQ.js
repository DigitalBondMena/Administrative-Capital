import{a as ce,b as se}from"./chunk-WTGH7RYH.js";import{a as ae}from"./chunk-JVV726LB.js";import{h as oe,i as re}from"./chunk-VVREEA4Z.js";import"./chunk-VETFLQVH.js";import{c as J,e as g,g as K,h as U,k as X,l as Z,n as $,o as ee,v as te,w as ie,x as ne}from"./chunk-XW6HRBBI.js";import"./chunk-ICJAHFYR.js";import"./chunk-PBA57O2B.js";import"./chunk-CEWKWK6U.js";import"./chunk-DNPQSKTC.js";import{A as z,D as H,h as G}from"./chunk-TNPE2B44.js";import{$ as v,$b as _,Ab as m,Eb as M,Ib as h,Jb as f,Nb as A,Ob as D,Pb as O,Rb as s,Sb as E,Tb as b,Va as a,Vb as N,Wa as j,Wb as R,Xb as V,Zb as B,_b as W,db as T,ea as F,fc as C,gc as Y,ha as I,hc as P,lb as u,na as S,oa as w,pb as c,tb as Q,ub as p,vb as q,wb as L,xb as k,yb as r,zb as n}from"./chunk-MFMNMFCO.js";import{f as ue}from"./chunk-DM275RSA.js";var le=(()=>{class t{transform(e,i){return e.filter(o=>o.helper_title.toLocaleLowerCase().includes(i.toLocaleLowerCase()))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=I({name:"searchCommunityQuestions",type:t,pure:!0,standalone:!0})}}return t})();var y=ue(ce());var fe=["successModal"],me=t=>({"d-none":t}),he=()=>[5,10,30],de=t=>["/community/answers",t];function _e(t,d){if(t&1){let e=M();r(0,"button",39),h("click",function(){S(e);let o=f().$implicit,l=f(2);return w(l.alertConfirmDelete(o.id))}),s(1," Remove "),m(2,"i",40),n()}}function ge(t,d){if(t&1&&(r(0,"li",27)(1,"div")(2,"h5")(3,"a",31),s(4),n()(),r(5,"p",32),s(6),n(),r(7,"small",33),s(8,"Asked by "),r(9,"span"),s(10),n(),s(11),C(12,"date"),n()(),r(13,"div",34)(14,"span",35),s(15),n(),r(16,"div",36),u(17,_e,3,0,"button",37),r(18,"a",38),s(19,"View"),n()()()()),t&2){let e=d.$implicit,i=f(2);a(3),c("routerLink",_(11,de,e.id)),a(),b(" ",e.helper_title," "),a(2),b(" ",e.helper_text," "),a(4),E(e.userdata.name),a(),b(" \u2022 ",P(12,8,e.created_at,"yyyy-MMMM-dd hh:mm a"),""),a(4),E(e.vote),a(2),p(17,e.userdata.email===i.userEmail||i.userRole==="admin"?17:-1),a(),c("routerLink",_(13,de,e.id))}}function be(t,d){t&1&&(r(0,"div",28)(1,"div",41)(2,"p",42),s(3,"No Questions Found"),n()()())}function Ce(t,d){if(t&1){let e=M();r(0,"div",26),L(1,ge,20,15,"li",27,q,!1,be,4,0,"div",28),C(4,"reverse"),C(5,"searchCommunityQuestions"),n(),r(6,"div",29)(7,"p-paginator",30),h("onPageChange",function(o){S(e);let l=f();return w(l.onPageChange(o))}),n()()}if(t&2){let e=f();a(),k(P(5,7,Y(4,5,e.subjectQuestions.subject.answers),e.inputSearch)),a(6),c("first",e.first)("rows",e.rows)("totalRecords",e.subjectQuestions.subject.answers.length)("rowsPerPageOptions",W(10,he))}}function ye(t,d){t&1&&(r(0,"div",28)(1,"div",43)(2,"p",42),s(3," loading Data... "),m(4,"i",44),n()()())}function xe(t,d){t&1&&(r(0,"div",20),s(1," Title is required and must be at least 5 characters. "),n())}function ve(t,d){t&1&&(r(0,"div",20),s(1," Description is required and must be at least 10 characters. "),n())}function Se(t,d){t&1&&m(0,"i",25)}var Oe=(()=>{class t{constructor(e){this.fb=e,this.inputSearch="",this.communityServices=v(ae),this.activatedRoute=v(z),this.first=0,this.rows=5,this.next=5,this.isLoading=!1,T(()=>{let i=JSON.parse(localStorage.getItem("userDetails"));this.userEmail=i.email,this.userRole=i.role,this.userID=i.id,console.log(i.role),console.log(i.email),console.log(i.id)})}ngOnInit(){this.getCurrentSubjectId(),this.questionForm=this.fb.group({user_id:[this.userID],helper_title:["",[g.required,g.minLength(5)]],helper_text:["",[g.required,g.minLength(10)]]})}ngAfterViewInit(){this.successModal&&(this.successModalInstance=new bootstrap.Modal(this.successModal.nativeElement))}getCurrentSubjectId(){this.activatedRoute.paramMap.subscribe({next:e=>{this.currentId=e.get("id"),this.getSubjectQuestions()}})}getSubjectQuestions(){this.communityServices.getSpecificSubject(this.currentId).subscribe({next:e=>{console.log(e),this.subjectQuestions=e}})}onPageChange(e){this.first=e.first,this.rows=e.rows,e.first+e.rows<this.subjectQuestions.subject.answers.length?(this.first=e.first,this.rows=e.rows,this.next=this.first+e.rows):this.next=this.subjectQuestions.subject.answers.length}alertConfirmDelete(e){y.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&this.deleteQuestion(e)})}deleteQuestion(e){this.communityServices.DeleteCommunityHelp(e).subscribe({next:i=>{console.log(i),this.getSubjectQuestions(),this.deleteQuestionSwal()}})}deleteQuestionSwal(){y.default.fire({title:"Deleted!",text:"Your question has been deleted.",icon:"success"})}openModal(){let e=document.getElementById("addQuestionModal");e&&(new bootstrap.Modal(e,{focus:!1}).show(),e.setAttribute("aria-hidden","false"))}closeModal(){let e=document.getElementById("addQuestionModal");if(e){let i=bootstrap.Modal.getInstance(e);i&&i.hide()}}submitQuestion(){this.questionForm.valid&&(this.isLoading=!0,this.questionForm.get("user_id")?.setValue(this.userID),this.communityServices.storeCommunityHelp(this.currentId,this.questionForm.value).subscribe({next:e=>{this.isLoading=!1,console.log(e),this.getSubjectQuestions(),this.closeModal(),this.questionForm.reset(),this.successAddQuestion()}}))}successAddQuestion(){y.default.fire({title:"Question Added",text:"Your question has been Added Successfully.",icon:"success"})}static{this.\u0275fac=function(i){return new(i||t)(j(te))}}static{this.\u0275cmp=F({type:t,selectors:[["app-question-community"]],viewQuery:function(i,o){if(i&1&&A(fe,5),i&2){let l;D(l=O())&&(o.successModal=l.first)}},standalone:!0,features:[B],decls:37,vars:15,consts:[[1,"container","my-5","py-5"],[1,"col-12","shadow","w-100","mb-4","bg-secondary","p-5"],[1,"form-floating","mb-3"],["type","search","id","floatingInput","placeholder","search articles...",1,"form-control",3,"ngModelChange","ngModel"],["for","floatingInput"],[1,"text-end","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus","ms-1"],[1,"list-group"],["id","addQuestionModal","tabindex","-1","aria-labelledby","addQuestionModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","addQuestionModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","helperTitle",1,"form-label"],["type","text","id","helperTitle","formControlName","helper_title",1,"form-control"],[1,"text-danger"],["for","helperText",1,"form-label"],["id","helperText","formControlName","helper_text",1,"form-control"],[1,"text-end"],["type","submit",1,"btn","btn-primary","px-5",3,"disabled"],[1,"fa-solid","fa-spin","fa-spinner","ms-1"],[1,"min-h-50vh"],[1,"list-group-item","d-flex","flex-wrap","justify-content-center","justify-content-md-between","align-items-center"],[1,"card","border-0","bg-light","shadow-sm","position-relative","card__animation"],[1,"flex","justify-content-center"],[3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],["href","#",1,"text-decoration-none","text-capitalize",3,"routerLink"],[1,"text-muted","mb-1"],[1,"text-primary"],[1,"text-center","text-md-end"],[1,"badge","bg-success"],[1,"d-flex","gap-1","mt-2"],[1,"btn","btn-sm","btn-outline-danger"],["href","#",1,"btn","btn-sm","btn-outline-primary","d-block",3,"routerLink"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash"],[1,"card-title","p-3","pb-0","fs-6","text-center"],[1,"fw-semibold","text-decoration-none"],[1,"card-title","p-3","pb-0","fs-4","text-center"],[1,"fa-solid","fa-spin","fa-spinner"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),V("ngModelChange",function(x){return R(o.inputSearch,x)||(o.inputSearch=x),x}),n(),r(4,"label",4),s(5,"Search Subjects"),n()()(),r(6,"div",5)(7,"button",6),h("click",function(){return o.openModal()}),s(8," Add New Question "),m(9,"i",7),n()(),r(10,"ul",8),u(11,Ce,8,11)(12,ye,5,0),n()(),r(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"h5",13),s(18,"Add New Question"),n(),m(19,"button",14),n(),r(20,"div",15)(21,"form",16),h("ngSubmit",function(){return o.submitQuestion()}),r(22,"div",17)(23,"label",18),s(24,"Title"),n(),m(25,"input",19),u(26,xe,2,0,"div",20),n(),r(27,"div",17)(28,"label",21),s(29,"Description"),n(),m(30,"textarea",22),u(31,ve,2,0,"div",20),n(),r(32,"div",23)(33,"button",24),s(34," Submit "),m(35,"i",7),u(36,Se,1,0,"i",25),n()()()()()()()),i&2&&(a(3),N("ngModel",o.inputSearch),a(6),Q(_(11,me,o.isLoading)),a(2),p(11,o.subjectQuestions?11:12),a(10),c("formGroup",o.questionForm),a(5),p(26,o.questionForm.controls.helper_title.invalid&&o.questionForm.controls.helper_title.touched?26:-1),a(5),p(31,o.questionForm.controls.helper_text.invalid&&o.questionForm.controls.helper_text.touched?31:-1),a(2),c("disabled",o.questionForm.invalid||o.isLoading),a(2),Q(_(13,me,o.isLoading)),a(),p(36,o.isLoading?36:-1))},dependencies:[ie,Z,J,K,U,X,re,oe,H,G,le,ne,$,ee,se],styles:["header[_ngcontent-%COMP%]{height:50vh;background-image:url(/assets/rev/1.webp);background-position:top center;background-size:cover;transform:translateY(10px);opacity:0;animation:_ngcontent-%COMP%_Welcome__Animation 1s forwards}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{transform:translate(-3000px);opacity:0;animation:_ngcontent-%COMP%_Welcome__Content__Animation 1s forwards}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{transform:translate(-3000px);opacity:0;animation:_ngcontent-%COMP%_Welcome__Content__Animation 1s .3s forwards}@keyframes _ngcontent-%COMP%_Welcome__Animation{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_Welcome__Content__Animation{0%{transform:translate(-3000px);opacity:0}to{transform:translate(0);opacity:1}}.breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{color:#fff}"]})}}return t})();export{Oe as QuestionCommunityComponent};
